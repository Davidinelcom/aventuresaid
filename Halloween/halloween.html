<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>El Halloween Màgic d’Alba i Dàlia</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%; width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #000;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    overflow: hidden;
  }

  #container {
    display: flex;
    width: 2049px;
    height: 1024px;
    max-width: 100vw;
    max-height: 100vh;
    background: #000;
    border-radius: 12px;
    box-shadow: 0 0 20px #ff7f00;
    overflow: hidden;
  }

  /* Mitad texto */
  .text-box {
    width: 1024px;
    height: 1024px;
    background-color: #FFA500;
    padding: 60px;
    color: #000;
    font-size: 32px;
    overflow-y: auto;
    box-shadow: inset 0 0 15px #cc7a00;
    line-height: 1.4;
  }

  /* Mitad imagen */
  .image-box {
    width: 1025px; /* para sumar 2049px total */
    height: 1024px;
    position: relative;
    background-color: #111;
  }
  .image-box img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    user-select: none;
    pointer-events: none;
  }

  nav {
    position: fixed;
    bottom: 20px;
    width: 100%;
    text-align: center;
    z-index: 1000;
  }
  button {
    background: #fff;
    border: none;
    padding: 15px 30px;
    margin: 0 10px;
    font-size: 20px;
    cursor: pointer;
    border-radius: 10px;
    user-select: none;
    box-shadow: 0 0 5px #666;
    transition: background-color 0.3s;
  }
  button:disabled {
    opacity: 0.5;
    cursor: default;
  }
  button:hover:not(:disabled) {
    background-color: #ffc366;
  }

  /* Animaciones leaf caient (pàgina 1) */
  .fulla {
    position: absolute;
    width: 40px;
    height: 40px;
    background-size: contain;
    background-repeat: no-repeat;
    animation: caure 6s linear infinite;
    opacity: 0.7;
    pointer-events: none;
  }
  @keyframes caure {
    0% {
      transform: translateY(-100px) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(1100px) rotate(360deg);
      opacity: 0;
    }
  }

  /* Animaciones Halloween (pàgina 3) */
  .flotant {
    position: absolute;
    width: 80px;
    height: 80px;
    animation: flotant 6s ease-in-out infinite alternate;
    opacity: 0.9;
    pointer-events: none;
    background-size: contain;
    background-repeat: no-repeat;
  }
  @keyframes flotant {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-50px);
    }
  }

  /* Guiño (pàgina 4) */
  .guiño {
    position: absolute;
    width: 180px;
    height: 180px;
    top: 420px;
    right: 200px;
    background-image: url('https://i.imgur.com/GZqv5Fw.png'); /* ulls oberts */
    background-size: cover;
    animation: guiñar 3s ease-in-out infinite;
    pointer-events: none;
    z-index: 10;
  }
  @keyframes guiñar {
    0%, 80%, 100% {
      background-image: url('https://i.imgur.com/GZqv5Fw.png');
    }
    40% {
      background-image: url('https://i.imgur.com/RvKvTFS.png');
    }
  }

</style>
</head>
<body>
  <div id="container">
    <div class="text-box" id="text-box">
      <!-- Aquí el texto se cargará dinámicamente -->
    </div>
    <div class="image-box" id="image-box">
      <img id="img-pagina" src="" alt="Il·lustració del conte" draggable="false" />
    </div>
  </div>

  <nav>
    <button id="prevBtn" disabled>Anterior</button>
    <button id="nextBtn">Següent</button>
  </nav>

<script>
  const textos = [
    // Portada
    {
      text: `<h1 style="font-size:64px; margin-bottom:40px;">El Halloween Màgic d’Alba i Dàlia</h1>
             <p style="font-size:32px;">Un conte de tardor ple de màgia i rialles</p>`,
      img: 'portada.png',
      anim: null
    },
    // Página 1 - fulles caient
    {
      text: `Era una vesprada de tardor i les fulles ballaven amb el vent.<br><br>
             En una casa amb olor a carabassa dolça, <strong>Alba</strong>, una xiqueta de set anys amb els cabells castanys i llargs, estava molt ocupada pintant ratpenats a la finestra.<br><br>
             Portava la seua samarreta preferida de <strong>Stitch</strong>, esquitxada de puntets de pintura de tots els colors.<br><br>
             Al seu costat, gatejava la seua cosineta <strong>Dàlia</strong>, una bebé riallera de cabells negres i curts, que arrossegava la seua carabasseta de tela buscant caramels amagats.`,
      img: '1.png',
      anim: 'fulles'
    },
    // Página 2 - ratpenat vola, sense animació
    {
      text: `—<strong>Mira, Dàlia!</strong> —va dir Alba—. Este ratpenat m’ha quedat genial.<br><br>
             Però just en acabar l’última pinzellada… <strong>el ratpenat va parpellejar i va eixir volant per la finestra!</strong><br><br>
             Dàlia va obrir els ulls com a plats.<br><br>
             —<strong>¡Buuuu!</strong> —balbucejava divertida mentre assenyalava el ratpenat que revolava pel sostre.`,
      img: '2.png',
      anim: null
    },
    // Página 3 - decoracions Halloween
    {
      text: `Alba es va fregar els ulls.<br><br>
             —Ho he fet jo, això? —va murmurar sorpresa.<br><br>
             Va agafar un altre pinzell, va dibuixar una carabassa somrient… i la carabassa va cobrar vida i va començar a rodar pel terra rient!<br><br>
             De sobte, tota l’habitació es va omplir de pintures vives: fantasmes que ballaven, estrelles que brillaven i gats que miolaven de mentida.`,
      img: '3.png',
      anim: 'halloween'
    },
    // Página 4 - guiño automático
    {
      text: `Al principi, Alba i Dàlia reien sense parar, fins que els ratpenats entremaliats van començar a amagar els caramels de Dàlia.<br><br>
             —Eh! Torneu-los! —cridava Alba entre rialles.<br><br>
             Llavors, Alba va tindre una idea: va pintar un gran arc de sant Martí màgic a l’aire… i tots els dibuixos van tornar al seu lloc, deixant la casa més bonica que mai.<br><br>
             Quan els pares van entrar, tot estava tranquil una altra vegada.<br><br>
             Només Dàlia tenia un secret dolç a les mans: un caramel brillant que el ratpenat li havia deixat de regal!<br><br>
             Aquella nit de Halloween, Alba va descobrir que tenia un superpoder amagat… el poder de donar vida a la imaginació.<br><br>
             I Dàlia, la seua petita còmplice, va ser la primera en descobrir-ho.`,
      img: '4.png',
      anim: 'guino'
    },
    // Final
    {
      text: `<h2 style="text-align:center; color:white;">Fi!</h2>
             <p style="text-align:center; color:white;">Gràcies per llegir el conte.</p>`,
      img: 'fi.png',
      anim: null
    }
  ];

  const containerText = document.getElementById('text-box');
  const containerImg = document.getElementById('image-box');
  const imgPagina = document.getElementById('img-pagina');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');

  let paginaActual = 0;

  function netejaAnimacions() {
    // Eliminar animacions anteriors
    containerImg.querySelectorAll('.fulla, .flotant, .guiño').forEach(e => e.remove());
  }

  // Crear fulles caient (pàgina 1)
  function crearFulles() {
    for (let i = 0; i < 20; i++) {
      const fulla = document.createElement('div');
      fulla.className = 'fulla';
      fulla.style.backgroundImage = "url('leaf.png')";
      // Posició aleatòria dins la meitat esquerra (text-box)
      fulla.style.left = (Math.random() * (1024 - 40)) + 'px';
      fulla.style.top = (-100 - Math.random() * 300) + 'px'; // començant fora de dalt
      fulla.style.animationDuration = (4 + Math.random() * 4) + 's';
      fulla.style.animationDelay = (Math.random() * 6) + 's';
      containerImg.appendChild(fulla);
    }
  }

  // Crear decoracions Halloween (pàgina 3)
  function crearDecoracions() {
    const icons = ['pumpkin.png', 'ghost.png', 'bat.png''];
    for (let i = 0; i < 12; i++) {
      const deco = document.createElement('div');
      deco.className = 'flotant';
      deco.style.backgroundImage = `url('${icons[i % icons.length]}')`;
      // Posició aleatòria a la meitat dreta (image-box)
      deco.style.left = (Math.random() * (1025 - 80)) + 'px';
      deco.style.top = (Math.random() * (1024 - 80)) + 'px';
      deco.style.animationDuration = (4 + Math.random() * 3) + 's';
      deco.style.animationDelay = (Math.random() * 6) + 's';
      containerImg.appendChild(deco);
    }
  }

  // Crear guiño (pàgina 4)
  function crearGuino() {
    const guino = document.createElement('div');
    guino.className = 'guiño';
    containerImg.appendChild(guino);
  }

  function mostrarPagina(idx) {
    paginaActual = idx;
    netejaAnimacions();

    const pag = textos[idx];
    containerText.innerHTML = pag.text;
    imgPagina.src = pag.img;

    prevBtn.disabled = idx === 0;
    nextBtn.disabled = idx === textos.length -1;

    // Animacions
    if (pag.anim === 'fulles') crearFulles();
    if (pag.anim === 'halloween') crearDecoracions();
    if (pag.anim === 'guino') crearGuino();
  }

  prevBtn.onclick = () => {
    if (paginaActual > 0) mostrarPagina(paginaActual - 1);
  }
  nextBtn.onclick = () => {
    if (paginaActual < textos.length - 1) mostrarPagina(paginaActual + 1);
  }

  mostrarPagina(paginaActual);

</script>

</body>
</html>
